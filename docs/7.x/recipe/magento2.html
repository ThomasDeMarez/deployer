<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-recipe/magento2">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">How to Deploy a Magento 2 Project | Deployer</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://deployer.org/img/ogimage@2x.png"><meta data-rh="true" name="twitter:image" content="https://deployer.org/img/ogimage@2x.png"><meta data-rh="true" property="og:url" content="https://deployer.org/docs/7.x/recipe/magento2"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How to Deploy a Magento 2 Project | Deployer"><meta data-rh="true" name="description" content="Source"><meta data-rh="true" property="og:description" content="Source"><link data-rh="true" rel="icon" href="/favicon.png"><link data-rh="true" rel="canonical" href="https://deployer.org/docs/7.x/recipe/magento2"><link data-rh="true" rel="alternate" href="https://deployer.org/docs/7.x/recipe/magento2" hreflang="en"><link data-rh="true" rel="alternate" href="https://deployer.org/docs/7.x/recipe/magento2" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://D8UUPXRXCO-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Deployer" href="/opensearch.xml">
<link rel="preconnect" href="https://mc.yandex.ru">
<script>!function(e,t,a,n,c,m,r){e.ym=e.ym||function(){(e.ym.a=e.ym.a||[]).push(arguments)},e.ym.l=1*new Date,m=t.createElement(a),r=t.getElementsByTagName(a)[0],m.async=1,m.src="https://mc.yandex.ru/metrika/tag.js",r.parentNode.insertBefore(m,r)}(window,document,"script"),window.YANDEX_METRIKA_TRACKING_ID=28042872,ym(28042872,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0,trackHash:!0})</script><link rel="stylesheet" href="/assets/css/styles.66b23f47.css">
<link rel="preload" href="/assets/js/runtime~main.2d3a4c36.js" as="script">
<link rel="preload" href="/assets/js/main.cb8a4ad7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Deployer" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Deployer" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Deployer</b></a><a class="navbar__item navbar__link" href="/docs/7.x/getting-started">Documentation</a><a class="navbar__item navbar__link" href="/docs/7.x/recipe">Recipes</a><a class="navbar__item navbar__link" href="/docs/7.x/contrib">Contrib</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/7.x/installation">7.x</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/7.x/recipe/magento2">7.x</a></li><li><a class="dropdown__link" href="/docs/6.x/getting-started">6.x</a></li></ul></div><a href="https://github.com/deployphp/deployer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 7.x</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>How to Deploy a Magento 2 Project</h1><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">require</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;recipe/magento2.php&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://github.com/deployphp/deployer/tree/master/recipe/magento2.php" target="_blank" rel="noopener noreferrer">Source</a></p><p>Deployer is a free and open source deployment tool written in PHP.
It helps you to deploy your Magento 2 application to a server.
It is very easy to use and has a lot of features. </p><p>Three main features of Deployer are:</p><ul><li><strong>Provisioning</strong> - provision your server for you.</li><li><strong>Zero downtime deployment</strong> - deploy your application without a downtime.</li><li><strong>Rollbacks</strong> - rollback your application to a previous version, if something goes wrong.</li></ul><p>Additionally, Deployer has a lot of other features, like:</p><ul><li><strong>Easy to use</strong> - Deployer is very easy to use. It has a simple and intuitive syntax.</li><li><strong>Fast</strong> - Deployer is very fast. It uses parallel connections to deploy your application.</li><li><strong>Secure</strong> - Deployer uses SSH to connect to your server.</li><li><strong>Supports all major PHP frameworks</strong> - Deployer supports all major PHP frameworks.</li></ul><p>You can read more about Deployer in <a href="/docs/7.x/getting-started">Getting Started</a>.</p><p>The <a href="#deploy">deploy</a> task of <strong>Magento 2</strong> consists of:</p><ul><li><a href="/docs/7.x/recipe/common#deployprepare">deploy:prepare</a> – Prepares a new release<ul><li><a href="/docs/7.x/recipe/deploy/info#deployinfo">deploy:info</a> – Displays info about deployment</li><li><a href="/docs/7.x/recipe/deploy/setup#deploysetup">deploy:setup</a> – Prepares host for deploy</li><li><a href="/docs/7.x/recipe/deploy/lock#deploylock">deploy:lock</a> – Locks deploy</li><li><a href="/docs/7.x/recipe/deploy/release#deployrelease">deploy:release</a> – Prepares release</li><li><a href="/docs/7.x/recipe/deploy/update_code#deployupdate_code">deploy:update_code</a> – Updates code</li><li><a href="/docs/7.x/recipe/deploy/shared#deployshared">deploy:shared</a> – Creates symlinks for shared files and dirs</li><li><a href="/docs/7.x/recipe/deploy/writable#deploywritable">deploy:writable</a> – Makes writable dirs</li></ul></li><li><a href="/docs/7.x/recipe/deploy/vendors#deployvendors">deploy:vendors</a> – Installs vendors</li><li><a href="/docs/7.x/recipe/deploy/clear_paths#deployclear_paths">deploy:clear_paths</a> – Cleanup files and/or directories</li><li><a href="/docs/7.x/recipe/magento2#deploymagento">deploy:magento</a> – Magento2 deployment operations<ul><li><a href="/docs/7.x/recipe/magento2#magentobuild">magento:build</a> – Magento2 build operations<ul><li><a href="/docs/7.x/recipe/magento2#magentocompile">magento:compile</a> – Compiles magento di</li><li><a href="/docs/7.x/recipe/magento2#magentodeployassets">magento:deploy:assets</a> – Deploys assets</li></ul></li><li><a href="/docs/7.x/recipe/magento2#magentomaintenanceenable-if-needed">magento:maintenance:enable-if-needed</a> – Set maintenance mode if needed</li><li><a href="/docs/7.x/recipe/magento2#magentoconfigimport">magento:config:import</a> – Config Import</li><li><a href="/docs/7.x/recipe/magento2#magentoupgradedb">magento:upgrade:db</a> – Upgrades magento database</li><li><a href="/docs/7.x/recipe/magento2#magentomaintenancedisable">magento:maintenance:disable</a> – Disables maintenance mode</li><li><a href="/docs/7.x/recipe/magento2#magentocacheflush">magento:cache:flush</a> – Flushes Magento Cache</li></ul></li><li><a href="/docs/7.x/recipe/common#deploypublish">deploy:publish</a> – Publishes the release<ul><li><a href="/docs/7.x/recipe/deploy/symlink#deploysymlink">deploy:symlink</a> – Creates symlink to release</li><li><a href="/docs/7.x/recipe/deploy/lock#deployunlock">deploy:unlock</a> – Unlocks deploy</li><li><a href="/docs/7.x/recipe/deploy/cleanup#deploycleanup">deploy:cleanup</a> – Cleanup old releases</li><li><a href="/docs/7.x/recipe/common#deploysuccess">deploy:success</a> – </li></ul></li></ul><p>In addition the <strong>Magento 2</strong> recipe contains an artifact deployment.
This is a two step process where you first execute</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">dep artifact</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">build </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">localhost</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>to build an artifact, which then is deployed on a server with</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">dep artifact</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">deploy </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>localhost</code> to build the artifact on has to be declared local, so either add</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">localhost</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;local&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>to your deploy.php or</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">hosts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">localhost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">local</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>to your deploy yaml.</p><p>The <a href="#artifact:build">artifact:build</a> command of <strong>Magento 2</strong> consists of: * <a href="/docs/7.x/recipe/magento2#buildprepare">build:prepare</a> – Prepare local artifact build</p><ul><li><a href="/docs/7.x/recipe/magento2#buildremove-generated">build:remove-generated</a> – Clears generated files prior to building.</li><li><a href="/docs/7.x/recipe/deploy/vendors#deployvendors">deploy:vendors</a> – Installs vendors</li><li><a href="/docs/7.x/recipe/magento2#magentocompile">magento:compile</a> – Compiles magento di</li><li><a href="/docs/7.x/recipe/magento2#magentodeployassets">magento:deploy:assets</a> – Deploys assets</li><li><a href="/docs/7.x/recipe/magento2#artifactpackage">artifact:package</a> – Packages all relevant files in an artifact.</li></ul><p> The <a href="#artifact:deploy">artifact:deploy</a> command of <strong>Magento 2</strong> consists of:</p><ul><li><a href="/docs/7.x/recipe/magento2#artifactprepare">artifact:prepare</a> – Prepares an artifact on the target server<ul><li><a href="/docs/7.x/recipe/deploy/info#deployinfo">deploy:info</a> – Displays info about deployment</li><li><a href="/docs/7.x/recipe/deploy/setup#deploysetup">deploy:setup</a> – Prepares host for deploy</li><li><a href="/docs/7.x/recipe/deploy/lock#deploylock">deploy:lock</a> – Locks deploy</li><li><a href="/docs/7.x/recipe/deploy/release#deployrelease">deploy:release</a> – Prepares release</li><li><a href="/docs/7.x/recipe/magento2#artifactupload">artifact:upload</a> – Uploads artifact in release folder for extraction.</li><li><a href="/docs/7.x/recipe/magento2#artifactextract">artifact:extract</a> – Extracts artifact in release path.</li><li><a href="/docs/7.x/recipe/magento2#deployadditional-shared">deploy:additional-shared</a> – Adds additional files and dirs to the list of shared files and dirs</li><li><a href="/docs/7.x/recipe/deploy/shared#deployshared">deploy:shared</a> – Creates symlinks for shared files and dirs</li><li><a href="/docs/7.x/recipe/deploy/writable#deploywritable">deploy:writable</a> – Makes writable dirs</li></ul></li><li><a href="/docs/7.x/recipe/magento2#magentomaintenanceenable-if-needed">magento:maintenance:enable-if-needed</a> – Set maintenance mode if needed</li><li><a href="/docs/7.x/recipe/magento2#magentoconfigimport">magento:config:import</a> – Config Import</li><li><a href="/docs/7.x/recipe/magento2#magentoupgradedb">magento:upgrade:db</a> – Upgrades magento database</li><li><a href="/docs/7.x/recipe/magento2#magentomaintenancedisable">magento:maintenance:disable</a> – Disables maintenance mode</li><li><a href="/docs/7.x/recipe/deploy/symlink#deploysymlink">deploy:symlink</a> – Creates symlink to release</li><li><a href="/docs/7.x/recipe/magento2#artifactfinish">artifact:finish</a> – Executes the tasks after artifact is released<ul><li><a href="/docs/7.x/recipe/magento2#magentocacheflush">magento:cache:flush</a> – Flushes Magento Cache</li><li><a href="/docs/7.x/contrib/cachetool#cachetoolclearopcache">cachetool:clear:opcache</a> – Clears OPcode cache</li><li><a href="/docs/7.x/recipe/deploy/cleanup#deploycleanup">deploy:cleanup</a> – Cleanup old releases</li><li><a href="/docs/7.x/recipe/deploy/lock#deployunlock">deploy:unlock</a> – Unlocks deploy</li></ul></li></ul><p>The magento2 recipe is based on the <a href="/docs/7.x/recipe/common">common</a> recipe.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="static_content_locales">static_content_locales<a href="#static_content_locales" class="hash-link" aria-label="Direct link to static_content_locales" title="Direct link to static_content_locales">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L26" target="_blank" rel="noopener noreferrer">Source</a></p><p>By default setup:static-content:deploy uses <code>en_US</code>.
To change that, simply put <code>set(&#x27;static_content_locales&#x27;, &#x27;en_US de_DE&#x27;);</code>
in you deployer script.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">&#x27;en_US&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magento_themes">magento_themes<a href="#magento_themes" class="hash-link" aria-label="Direct link to magento_themes" title="Direct link to magento_themes">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L43" target="_blank" rel="noopener noreferrer">Source</a></p><p>You can also set the themes to run against. By default it&#x27;ll deploy
all themes - <code>add(&#x27;magento_themes&#x27;, [&#x27;Magento/luma&#x27;, &#x27;Magento/backend&#x27;]);</code>
If the themes are set as a simple list of strings, then all languages defined in <a href="/docs/7.x/recipe/magento2#static_content_locales">static_content_locales</a> are
compiled for the given themes.
Alternatively The themes can be defined as an associative array, where the key represents the theme name and
the key contains the languages for the compilation (for this specific theme)
Example:
set(&#x27;magento_themes&#x27;, <!-- -->[&#x27;Magento/luma&#x27;]<!-- -->); - Will compile this theme with every language from <a href="/docs/7.x/recipe/magento2#static_content_locales">static_content_locales</a>
set(&#x27;magento_themes&#x27;, [
&#x27;Magento/luma&#x27;   =&gt; null,                              - Will compile all languages from <a href="/docs/7.x/recipe/magento2#static_content_locales">static_content_locales</a> for Magento/luma
&#x27;Custom/theme&#x27;   =&gt; &#x27;en_US fr_FR&#x27;                      - Will compile only en_US and fr_FR for Custom/theme
&#x27;Custom/another&#x27; =&gt; &#x27;<a href="/docs/7.x/recipe/magento2#static_content_locales">static_content_locales</a> it_IT&#x27; - Will compile all languages from <a href="/docs/7.x/recipe/magento2#static_content_locales">static_content_locales</a> + it_IT for Custom/another
]); - Will compile this theme with every language</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="static_deploy_options">static_deploy_options<a href="#static_deploy_options" class="hash-link" aria-label="Direct link to static_deploy_options" title="Direct link to static_deploy_options">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L48" target="_blank" rel="noopener noreferrer">Source</a></p><p>Static content deployment options, e.g. &#x27;--no-parent&#x27;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="split_static_deployment">split_static_deployment<a href="#split_static_deployment" class="hash-link" aria-label="Direct link to split_static_deployment" title="Direct link to split_static_deployment">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L51" target="_blank" rel="noopener noreferrer">Source</a></p><p>Deploy frontend and adminhtml together as default</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token constant boolean" style="color:#36acaa">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="static_content_locales_backend">static_content_locales_backend<a href="#static_content_locales_backend" class="hash-link" aria-label="Direct link to static_content_locales_backend" title="Direct link to static_content_locales_backend">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L54" target="_blank" rel="noopener noreferrer">Source</a></p><p>Use the default languages for the backend as default</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{static_content_locales}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magento_themes_backend">magento_themes_backend<a href="#magento_themes_backend" class="hash-link" aria-label="Direct link to magento_themes_backend" title="Direct link to magento_themes_backend">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L58" target="_blank" rel="noopener noreferrer">Source</a></p><p>backend themes to deploy. Only used if split_static_deployment=true
This setting supports the same options/structure as <a href="/docs/7.x/recipe/magento2#magento_themes">magento_themes</a></p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Magento/backend&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">null</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="static_content_jobs">static_content_jobs<a href="#static_content_jobs" class="hash-link" aria-label="Direct link to static_content_jobs" title="Direct link to static_content_jobs">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L64" target="_blank" rel="noopener noreferrer">Source</a></p><p>Also set the number of conccurent jobs to run. The default is 1
Update using: <code>set(&#x27;static_content_jobs&#x27;, &#x27;1&#x27;);</code></p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">&#x27;1&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="content_version">content_version<a href="#content_version" class="hash-link" aria-label="Direct link to content_version" title="Direct link to content_version">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L66" target="_blank" rel="noopener noreferrer">Source</a></p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magento_dir">magento_dir<a href="#magento_dir" class="hash-link" aria-label="Direct link to magento_dir" title="Direct link to magento_dir">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L71" target="_blank" rel="noopener noreferrer">Source</a></p><p>Magento directory relative to repository root. Use &quot;.&quot; (default) if it is not located in a subdirectory</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">&#x27;.&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="shared_files">shared_files<a href="#shared_files" class="hash-link" aria-label="Direct link to shared_files" title="Direct link to shared_files">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L74" target="_blank" rel="noopener noreferrer">Source</a></p><p>Overrides <a href="/docs/7.x/recipe/deploy/shared#shared_files">shared_files</a> from <code>recipe/deploy/shared.php</code>.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/app/etc/env.php&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/.maintenance.ip&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="shared_dirs">shared_dirs<a href="#shared_dirs" class="hash-link" aria-label="Direct link to shared_dirs" title="Direct link to shared_dirs">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L78" target="_blank" rel="noopener noreferrer">Source</a></p><p>Overrides <a href="/docs/7.x/recipe/deploy/shared#shared_dirs">shared_dirs</a> from <code>recipe/deploy/shared.php</code>.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/composer_home&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/log&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/export&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/report&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/import&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/import_history&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/session&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/importexport&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/backups&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/tmp&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/pub/sitemap&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/pub/media&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/pub/static/_cache&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="writable_dirs">writable_dirs<a href="#writable_dirs" class="hash-link" aria-label="Direct link to writable_dirs" title="Direct link to writable_dirs">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L93" target="_blank" rel="noopener noreferrer">Source</a></p><p>Overrides <a href="/docs/7.x/recipe/deploy/writable#writable_dirs">writable_dirs</a> from <code>recipe/deploy/writable.php</code>.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/pub/static&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/pub/media&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/generated&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/page_cache&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clear_paths">clear_paths<a href="#clear_paths" class="hash-link" aria-label="Direct link to clear_paths" title="Direct link to clear_paths">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L100" target="_blank" rel="noopener noreferrer">Source</a></p><p>Overrides <a href="/docs/7.x/recipe/deploy/clear_paths#clear_paths">clear_paths</a> from <code>recipe/deploy/clear_paths.php</code>.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/generated/*&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/pub/static/_cache/*&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/generation/*&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/cache/*&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/page_cache/*&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{magento_dir}}/var/view_preprocessed/*&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="binmagento">bin/magento<a href="#binmagento" class="hash-link" aria-label="Direct link to bin/magento" title="Direct link to bin/magento">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L109" target="_blank" rel="noopener noreferrer">Source</a></p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{release_or_current_path}}/{{magento_dir}}/bin/magento&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magento_version">magento_version<a href="#magento_version" class="hash-link" aria-label="Direct link to magento_version" title="Direct link to magento_version">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L111" target="_blank" rel="noopener noreferrer">Source</a></p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// detect version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token variable" style="color:#36acaa">$versionOutput</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;{{bin/php}} {{bin/magento}} --version&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">preg_match</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;/(\d+\.?)+(-p\d+)?$/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$versionOutput</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$matches</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$matches</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;2.0&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="config_import_needed">config_import_needed<a href="#config_import_needed" class="hash-link" aria-label="Direct link to config_import_needed" title="Direct link to config_import_needed">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L118" target="_blank" rel="noopener noreferrer">Source</a></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Autogenerated</div><div class="admonitionContent_S0QG"><p>The value of this configuration is autogenerated on access.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="database_upgrade_needed">database_upgrade_needed<a href="#database_upgrade_needed" class="hash-link" aria-label="Direct link to database_upgrade_needed" title="Direct link to database_upgrade_needed">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L132" target="_blank" rel="noopener noreferrer">Source</a></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Autogenerated</div><div class="admonitionContent_S0QG"><p>The value of this configuration is autogenerated on access.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable_zerodowntime">enable_zerodowntime<a href="#enable_zerodowntime" class="hash-link" aria-label="Direct link to enable_zerodowntime" title="Direct link to enable_zerodowntime">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L157" target="_blank" rel="noopener noreferrer">Source</a></p><p>Deploy without setting maintenance mode if possible</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token constant boolean" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="artifact_file">artifact_file<a href="#artifact_file" class="hash-link" aria-label="Direct link to artifact_file" title="Direct link to artifact_file">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L343" target="_blank" rel="noopener noreferrer">Source</a></p><p>The file the artifact is saved to</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">&#x27;artifact.tar.gz&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="artifact_dir">artifact_dir<a href="#artifact_dir" class="hash-link" aria-label="Direct link to artifact_dir" title="Direct link to artifact_dir">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L346" target="_blank" rel="noopener noreferrer">Source</a></p><p>The directory the artifact is saved in</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">&#x27;artifacts&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="artifact_excludes_file">artifact_excludes_file<a href="#artifact_excludes_file" class="hash-link" aria-label="Direct link to artifact_excludes_file" title="Direct link to artifact_excludes_file">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L350" target="_blank" rel="noopener noreferrer">Source</a></p><p>Points to a file with a list of files to exclude from packaging.
The format is as with the <code>tar --exclude-from=[file]</code> option</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">&#x27;artifacts/excludes&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build_from_repo">build_from_repo<a href="#build_from_repo" class="hash-link" aria-label="Direct link to build_from_repo" title="Direct link to build_from_repo">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L353" target="_blank" rel="noopener noreferrer">Source</a></p><p>If set to true, the artifact is built from a clean copy of the project repository instead of the current working directory</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token constant boolean" style="color:#36acaa">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="repository">repository<a href="#repository" class="hash-link" aria-label="Direct link to repository" title="Direct link to repository">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L356" target="_blank" rel="noopener noreferrer">Source</a></p><p>Overrides <a href="/docs/7.x/recipe/common#repository">repository</a> from <code>recipe/common.php</code>.</p><p>Set this value if &quot;build_from_repo&quot; is set to true. The target to deploy must also be set with &quot;--branch&quot;, &quot;--tag&quot; or &quot;--revision&quot;</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token constant" style="color:#36acaa">null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="artifact_path">artifact_path<a href="#artifact_path" class="hash-link" aria-label="Direct link to artifact_path" title="Direct link to artifact_path">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L359" target="_blank" rel="noopener noreferrer">Source</a></p><p>The relative path to the artifact file. If the directory does not exist, it will be created</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Default value</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">testLocally</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;[ -d {{artifact_dir}} ]&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">runLocally</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;mkdir -p {{artifact_dir}}&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;artifact_dir&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">.</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;/&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">.</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;artifact_file&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bintar">bin/tar<a href="#bintar" class="hash-link" aria-label="Direct link to bin/tar" title="Direct link to bin/tar">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L367" target="_blank" rel="noopener noreferrer">Source</a></p><p>The location of the tar command. On MacOS you should have installed gtar, as it supports the required settings</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Autogenerated</div><div class="admonitionContent_S0QG"><p>The value of this configuration is autogenerated on access.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="additional_shared_files">additional_shared_files<a href="#additional_shared_files" class="hash-link" aria-label="Direct link to additional_shared_files" title="Direct link to additional_shared_files">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L439" target="_blank" rel="noopener noreferrer">Source</a></p><p>Array of shared files that will be added to the default shared_files without overriding</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="additional_shared_dirs">additional_shared_dirs<a href="#additional_shared_dirs" class="hash-link" aria-label="Direct link to additional_shared_dirs" title="Direct link to additional_shared_dirs">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L441" target="_blank" rel="noopener noreferrer">Source</a></p><p>Array of shared directories that will be added to the default shared_dirs without overriding</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tasks">Tasks<a href="#tasks" class="hash-link" aria-label="Direct link to Tasks" title="Direct link to Tasks">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentocompile">magento:compile<a href="#magentocompile" class="hash-link" aria-label="Direct link to magento:compile" title="Direct link to magento:compile">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L167" target="_blank" rel="noopener noreferrer">Source</a></p><p>Compiles magento di.</p><p>To work correctly with artifact deployment, it is necessary to set the MAGE_MODE correctly in <code>app/etc/config.php</code>
e.g.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">&#x27;MAGE_MODE&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;production&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentodeployassets">magento:deploy:assets<a href="#magentodeployassets" class="hash-link" aria-label="Direct link to magento:deploy:assets" title="Direct link to magento:deploy:assets">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L193" target="_blank" rel="noopener noreferrer">Source</a></p><p>Deploys assets.</p><p>To work correctly with artifact deployment it is necessary to set <code>system/dev/js</code> , <code>system/dev/css</code> and <code>system/dev/template</code>
in <code>app/etc/config.php</code>, e.g.:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">&#x27;system&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;default&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;dev&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;js&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;merge_files&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;minify_files&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;css&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;merge_files&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;minify_files&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;template&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;minify_html&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentodeployassetsadminhtml">magento:deploy:assets:adminhtml<a href="#magentodeployassetsadminhtml" class="hash-link" aria-label="Direct link to magento:deploy:assets:adminhtml" title="Direct link to magento:deploy:assets:adminhtml">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L209" target="_blank" rel="noopener noreferrer">Source</a></p><p>Deploys assets for backend only.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentodeployassetsfrontend">magento:deploy:assets:frontend<a href="#magentodeployassetsfrontend" class="hash-link" aria-label="Direct link to magento:deploy:assets:frontend" title="Direct link to magento:deploy:assets:frontend">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L214" target="_blank" rel="noopener noreferrer">Source</a></p><p>Deploys assets for frontend only.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentosynccontent_version">magento:sync:content_version<a href="#magentosynccontent_version" class="hash-link" aria-label="Direct link to magento:sync:content_version" title="Direct link to magento:sync:content_version">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L262" target="_blank" rel="noopener noreferrer">Source</a></p><p>Syncs content version.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentomaintenanceenable">magento:maintenance:enable<a href="#magentomaintenanceenable" class="hash-link" aria-label="Direct link to magento:maintenance:enable" title="Direct link to magento:maintenance:enable">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L272" target="_blank" rel="noopener noreferrer">Source</a></p><p>Enables maintenance mode.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentomaintenancedisable">magento:maintenance:disable<a href="#magentomaintenancedisable" class="hash-link" aria-label="Direct link to magento:maintenance:disable" title="Direct link to magento:maintenance:disable">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L278" target="_blank" rel="noopener noreferrer">Source</a></p><p>Disables maintenance mode.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentomaintenanceenable-if-needed">magento:maintenance:enable-if-needed<a href="#magentomaintenanceenable-if-needed" class="hash-link" aria-label="Direct link to magento:maintenance:enable-if-needed" title="Direct link to magento:maintenance:enable-if-needed">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L284" target="_blank" rel="noopener noreferrer">Source</a></p><p>Set maintenance mode if needed.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentoconfigimport">magento:config:import<a href="#magentoconfigimport" class="hash-link" aria-label="Direct link to magento:config:import" title="Direct link to magento:config:import">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L291" target="_blank" rel="noopener noreferrer">Source</a></p><p>Config Import.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentoupgradedb">magento:upgrade:db<a href="#magentoupgradedb" class="hash-link" aria-label="Direct link to magento:upgrade:db" title="Direct link to magento:upgrade:db">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L300" target="_blank" rel="noopener noreferrer">Source</a></p><p>Upgrades magento database.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentocacheflush">magento:cache:flush<a href="#magentocacheflush" class="hash-link" aria-label="Direct link to magento:cache:flush" title="Direct link to magento:cache:flush">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L309" target="_blank" rel="noopener noreferrer">Source</a></p><p>Flushes Magento Cache.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploymagento">deploy:magento<a href="#deploymagento" class="hash-link" aria-label="Direct link to deploy:magento" title="Direct link to deploy:magento">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L314" target="_blank" rel="noopener noreferrer">Source</a></p><p>Magento2 deployment operations.</p><p>This task is group task which contains next tasks:</p><ul><li><a href="/docs/7.x/recipe/magento2#magentobuild">magento:build</a></li><li><a href="/docs/7.x/recipe/magento2#magentomaintenanceenable-if-needed">magento:maintenance:enable-if-needed</a></li><li><a href="/docs/7.x/recipe/magento2#magentoconfigimport">magento:config:import</a></li><li><a href="/docs/7.x/recipe/magento2#magentoupgradedb">magento:upgrade:db</a></li><li><a href="/docs/7.x/recipe/magento2#magentomaintenancedisable">magento:maintenance:disable</a></li><li><a href="/docs/7.x/recipe/magento2#magentocacheflush">magento:cache:flush</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentobuild">magento:build<a href="#magentobuild" class="hash-link" aria-label="Direct link to magento:build" title="Direct link to magento:build">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L324" target="_blank" rel="noopener noreferrer">Source</a></p><p>Magento2 build operations.</p><p>This task is group task which contains next tasks:</p><ul><li><a href="/docs/7.x/recipe/magento2#magentocompile">magento:compile</a></li><li><a href="/docs/7.x/recipe/magento2#magentodeployassets">magento:deploy:assets</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy">deploy<a href="#deploy" class="hash-link" aria-label="Direct link to deploy" title="Direct link to deploy">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L330" target="_blank" rel="noopener noreferrer">Source</a></p><p>Deploys your project.</p><p>This task is group task which contains next tasks:</p><ul><li><a href="/docs/7.x/recipe/common#deployprepare">deploy:prepare</a></li><li><a href="/docs/7.x/recipe/deploy/vendors#deployvendors">deploy:vendors</a></li><li><a href="/docs/7.x/recipe/deploy/clear_paths#deployclear_paths">deploy:clear_paths</a></li><li><a href="/docs/7.x/recipe/magento2#deploymagento">deploy:magento</a></li><li><a href="/docs/7.x/recipe/common#deploypublish">deploy:publish</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="artifactpackage">artifact:package<a href="#artifactpackage" class="hash-link" aria-label="Direct link to artifact:package" title="Direct link to artifact:package">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L378" target="_blank" rel="noopener noreferrer">Source</a></p><p>Packages all relevant files in an artifact.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="artifactupload">artifact:upload<a href="#artifactupload" class="hash-link" aria-label="Direct link to artifact:upload" title="Direct link to artifact:upload">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L388" target="_blank" rel="noopener noreferrer">Source</a></p><p>Uploads artifact in release folder for extraction.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="artifactextract">artifact:extract<a href="#artifactextract" class="hash-link" aria-label="Direct link to artifact:extract" title="Direct link to artifact:extract">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L393" target="_blank" rel="noopener noreferrer">Source</a></p><p>Extracts artifact in release path.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildremove-generated">build:remove-generated<a href="#buildremove-generated" class="hash-link" aria-label="Direct link to build:remove-generated" title="Direct link to build:remove-generated">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L399" target="_blank" rel="noopener noreferrer">Source</a></p><p>Clears generated files prior to building.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildprepare">build:prepare<a href="#buildprepare" class="hash-link" aria-label="Direct link to build:prepare" title="Direct link to build:prepare">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L404" target="_blank" rel="noopener noreferrer">Source</a></p><p>Prepare local artifact build.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="artifactbuild">artifact:build<a href="#artifactbuild" class="hash-link" aria-label="Direct link to artifact:build" title="Direct link to artifact:build">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L429" target="_blank" rel="noopener noreferrer">Source</a></p><p>Builds an artifact.</p><p>This task is group task which contains next tasks:</p><ul><li><a href="/docs/7.x/recipe/magento2#buildprepare">build:prepare</a></li><li><a href="/docs/7.x/recipe/magento2#buildremove-generated">build:remove-generated</a></li><li><a href="/docs/7.x/recipe/deploy/vendors#deployvendors">deploy:vendors</a></li><li><a href="/docs/7.x/recipe/magento2#magentocompile">magento:compile</a></li><li><a href="/docs/7.x/recipe/magento2#magentodeployassets">magento:deploy:assets</a></li><li><a href="/docs/7.x/recipe/magento2#artifactpackage">artifact:package</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deployadditional-shared">deploy:additional-shared<a href="#deployadditional-shared" class="hash-link" aria-label="Direct link to deploy:additional-shared" title="Direct link to deploy:additional-shared">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L445" target="_blank" rel="noopener noreferrer">Source</a></p><p>Adds additional files and dirs to the list of shared files and dirs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentoset_cache_prefix">magento:set_cache_prefix<a href="#magentoset_cache_prefix" class="hash-link" aria-label="Direct link to magento:set_cache_prefix" title="Direct link to magento:set_cache_prefix">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L460" target="_blank" rel="noopener noreferrer">Source</a></p><p>Update cache id_prefix.</p><p>Update cache id_prefix on deploy so that you are compiling against a fresh cache
Reference Issue: <a href="https://github.com/davidalger/capistrano-magento2/issues/151" target="_blank" rel="noopener noreferrer">https://github.com/davidalger/capistrano-magento2/issues/151</a>
To use this feature, add the following to your deployer scripts:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">after</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;deploy:shared&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;magento:set_cache_prefix&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">after</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;deploy:magento&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;magento:cleanup_cache_prefix&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentocleanup_cache_prefix">magento:cleanup_cache_prefix<a href="#magentocleanup_cache_prefix" class="hash-link" aria-label="Direct link to magento:cleanup_cache_prefix" title="Direct link to magento:cleanup_cache_prefix">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L500" target="_blank" rel="noopener noreferrer">Source</a></p><p>Cleanup cache id_prefix env files.</p><p>After successful deployment, move the tmp_env.php file to env.php ready for next deployment</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentocronstop">magento:cron:stop<a href="#magentocronstop" class="hash-link" aria-label="Direct link to magento:cron:stop" title="Direct link to magento:cron:stop">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L516" target="_blank" rel="noopener noreferrer">Source</a></p><p>Remove cron from crontab and kill running cron jobs.</p><p>Remove cron from crontab and kill running cron jobs
To use this feature, add the following to your deployer scripts:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">after</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;magento:maintenance:enable-if-needed&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;magento:cron:stop&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="magentocroninstall">magento:cron:install<a href="#magentocroninstall" class="hash-link" aria-label="Direct link to magento:cron:install" title="Direct link to magento:cron:install">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L532" target="_blank" rel="noopener noreferrer">Source</a></p><p>Install cron in crontab.</p><p>Install cron in crontab
To use this feature, add the following to your deployer scripts:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">after</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;magento:upgrade:db&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;magento:cron:install&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="artifactprepare">artifact:prepare<a href="#artifactprepare" class="hash-link" aria-label="Direct link to artifact:prepare" title="Direct link to artifact:prepare">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L538" target="_blank" rel="noopener noreferrer">Source</a></p><p>Prepares an artifact on the target server.</p><p>This task is group task which contains next tasks:</p><ul><li><a href="/docs/7.x/recipe/deploy/info#deployinfo">deploy:info</a></li><li><a href="/docs/7.x/recipe/deploy/setup#deploysetup">deploy:setup</a></li><li><a href="/docs/7.x/recipe/deploy/lock#deploylock">deploy:lock</a></li><li><a href="/docs/7.x/recipe/deploy/release#deployrelease">deploy:release</a></li><li><a href="/docs/7.x/recipe/magento2#artifactupload">artifact:upload</a></li><li><a href="/docs/7.x/recipe/magento2#artifactextract">artifact:extract</a></li><li><a href="/docs/7.x/recipe/magento2#deployadditional-shared">deploy:additional-shared</a></li><li><a href="/docs/7.x/recipe/deploy/shared#deployshared">deploy:shared</a></li><li><a href="/docs/7.x/recipe/deploy/writable#deploywritable">deploy:writable</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="artifactfinish">artifact:finish<a href="#artifactfinish" class="hash-link" aria-label="Direct link to artifact:finish" title="Direct link to artifact:finish">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L551" target="_blank" rel="noopener noreferrer">Source</a></p><p>Executes the tasks after artifact is released.</p><p>This task is group task which contains next tasks:</p><ul><li><a href="/docs/7.x/recipe/magento2#magentocacheflush">magento:cache:flush</a></li><li><a href="/docs/7.x/contrib/cachetool#cachetoolclearopcache">cachetool:clear:opcache</a></li><li><a href="/docs/7.x/recipe/deploy/cleanup#deploycleanup">deploy:cleanup</a></li><li><a href="/docs/7.x/recipe/deploy/lock#deployunlock">deploy:unlock</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="artifactdeploy">artifact:deploy<a href="#artifactdeploy" class="hash-link" aria-label="Direct link to artifact:deploy" title="Direct link to artifact:deploy">​</a></h3><p><a href="https://github.com/deployphp/deployer/blob/master/recipe/magento2.php#L560" target="_blank" rel="noopener noreferrer">Source</a></p><p>Actually releases the artifact deployment.</p><p>This task is group task which contains next tasks:</p><ul><li><a href="/docs/7.x/recipe/magento2#artifactprepare">artifact:prepare</a></li><li><a href="/docs/7.x/recipe/magento2#magentomaintenanceenable-if-needed">magento:maintenance:enable-if-needed</a></li><li><a href="/docs/7.x/recipe/magento2#magentoconfigimport">magento:config:import</a></li><li><a href="/docs/7.x/recipe/magento2#magentoupgradedb">magento:upgrade:db</a></li><li><a href="/docs/7.x/recipe/magento2#magentomaintenancedisable">magento:maintenance:disable</a></li><li><a href="/docs/7.x/recipe/deploy/symlink#deploysymlink">deploy:symlink</a></li><li><a href="/docs/7.x/recipe/magento2#artifactfinish">artifact:finish</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/deployphp/deployer/edit/master/docs/recipe/magento2.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#static_content_locales" class="table-of-contents__link toc-highlight">static_content_locales</a></li><li><a href="#magento_themes" class="table-of-contents__link toc-highlight">magento_themes</a></li><li><a href="#static_deploy_options" class="table-of-contents__link toc-highlight">static_deploy_options</a></li><li><a href="#split_static_deployment" class="table-of-contents__link toc-highlight">split_static_deployment</a></li><li><a href="#static_content_locales_backend" class="table-of-contents__link toc-highlight">static_content_locales_backend</a></li><li><a href="#magento_themes_backend" class="table-of-contents__link toc-highlight">magento_themes_backend</a></li><li><a href="#static_content_jobs" class="table-of-contents__link toc-highlight">static_content_jobs</a></li><li><a href="#content_version" class="table-of-contents__link toc-highlight">content_version</a></li><li><a href="#magento_dir" class="table-of-contents__link toc-highlight">magento_dir</a></li><li><a href="#shared_files" class="table-of-contents__link toc-highlight">shared_files</a></li><li><a href="#shared_dirs" class="table-of-contents__link toc-highlight">shared_dirs</a></li><li><a href="#writable_dirs" class="table-of-contents__link toc-highlight">writable_dirs</a></li><li><a href="#clear_paths" class="table-of-contents__link toc-highlight">clear_paths</a></li><li><a href="#binmagento" class="table-of-contents__link toc-highlight">bin/magento</a></li><li><a href="#magento_version" class="table-of-contents__link toc-highlight">magento_version</a></li><li><a href="#config_import_needed" class="table-of-contents__link toc-highlight">config_import_needed</a></li><li><a href="#database_upgrade_needed" class="table-of-contents__link toc-highlight">database_upgrade_needed</a></li><li><a href="#enable_zerodowntime" class="table-of-contents__link toc-highlight">enable_zerodowntime</a></li><li><a href="#artifact_file" class="table-of-contents__link toc-highlight">artifact_file</a></li><li><a href="#artifact_dir" class="table-of-contents__link toc-highlight">artifact_dir</a></li><li><a href="#artifact_excludes_file" class="table-of-contents__link toc-highlight">artifact_excludes_file</a></li><li><a href="#build_from_repo" class="table-of-contents__link toc-highlight">build_from_repo</a></li><li><a href="#repository" class="table-of-contents__link toc-highlight">repository</a></li><li><a href="#artifact_path" class="table-of-contents__link toc-highlight">artifact_path</a></li><li><a href="#bintar" class="table-of-contents__link toc-highlight">bin/tar</a></li><li><a href="#additional_shared_files" class="table-of-contents__link toc-highlight">additional_shared_files</a></li><li><a href="#additional_shared_dirs" class="table-of-contents__link toc-highlight">additional_shared_dirs</a></li></ul></li><li><a href="#tasks" class="table-of-contents__link toc-highlight">Tasks</a><ul><li><a href="#magentocompile" class="table-of-contents__link toc-highlight">magento:compile</a></li><li><a href="#magentodeployassets" class="table-of-contents__link toc-highlight">magento:deploy:assets</a></li><li><a href="#magentodeployassetsadminhtml" class="table-of-contents__link toc-highlight">magento:deploy:assets:adminhtml</a></li><li><a href="#magentodeployassetsfrontend" class="table-of-contents__link toc-highlight">magento:deploy:assets:frontend</a></li><li><a href="#magentosynccontent_version" class="table-of-contents__link toc-highlight">magento:sync:content_version</a></li><li><a href="#magentomaintenanceenable" class="table-of-contents__link toc-highlight">magento:maintenance:enable</a></li><li><a href="#magentomaintenancedisable" class="table-of-contents__link toc-highlight">magento:maintenance:disable</a></li><li><a href="#magentomaintenanceenable-if-needed" class="table-of-contents__link toc-highlight">magento:maintenance:enable-if-needed</a></li><li><a href="#magentoconfigimport" class="table-of-contents__link toc-highlight">magento:config:import</a></li><li><a href="#magentoupgradedb" class="table-of-contents__link toc-highlight">magento:upgrade:db</a></li><li><a href="#magentocacheflush" class="table-of-contents__link toc-highlight">magento:cache:flush</a></li><li><a href="#deploymagento" class="table-of-contents__link toc-highlight">deploy:magento</a></li><li><a href="#magentobuild" class="table-of-contents__link toc-highlight">magento:build</a></li><li><a href="#deploy" class="table-of-contents__link toc-highlight">deploy</a></li><li><a href="#artifactpackage" class="table-of-contents__link toc-highlight">artifact:package</a></li><li><a href="#artifactupload" class="table-of-contents__link toc-highlight">artifact:upload</a></li><li><a href="#artifactextract" class="table-of-contents__link toc-highlight">artifact:extract</a></li><li><a href="#buildremove-generated" class="table-of-contents__link toc-highlight">build:remove-generated</a></li><li><a href="#buildprepare" class="table-of-contents__link toc-highlight">build:prepare</a></li><li><a href="#artifactbuild" class="table-of-contents__link toc-highlight">artifact:build</a></li><li><a href="#deployadditional-shared" class="table-of-contents__link toc-highlight">deploy:additional-shared</a></li><li><a href="#magentoset_cache_prefix" class="table-of-contents__link toc-highlight">magento:set_cache_prefix</a></li><li><a href="#magentocleanup_cache_prefix" class="table-of-contents__link toc-highlight">magento:cleanup_cache_prefix</a></li><li><a href="#magentocronstop" class="table-of-contents__link toc-highlight">magento:cron:stop</a></li><li><a href="#magentocroninstall" class="table-of-contents__link toc-highlight">magento:cron:install</a></li><li><a href="#artifactprepare" class="table-of-contents__link toc-highlight">artifact:prepare</a></li><li><a href="#artifactfinish" class="table-of-contents__link toc-highlight">artifact:finish</a></li><li><a href="#artifactdeploy" class="table-of-contents__link toc-highlight">artifact:deploy</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/deployphp/deployer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Deployer</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2d3a4c36.js"></script>
<script src="/assets/js/main.cb8a4ad7.js"></script>
</body>
</html>