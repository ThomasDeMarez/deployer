"use strict";(self.webpackChunkdeployer_docs=self.webpackChunkdeployer_docs||[]).push([[6574],{4137:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>s});var r=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(e,t){if(null==e)return{};var a,r,o=function(e,t){if(null==e)return{};var a,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var p=r.createContext({}),i=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},u=function(e){var t=i(e.components);return r.createElement(p.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},k=r.forwardRef((function(e,t){var a=e.components,o=e.mdxType,l=e.originalType,p=e.parentName,u=n(e,["components","mdxType","originalType","parentName"]),k=i(a),s=o,m=k["".concat(p,".").concat(s)]||k[s]||h[s]||l;return a?r.createElement(m,c(c({ref:t},u),{},{components:a})):r.createElement(m,c({ref:t},u))}));function s(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=a.length,c=new Array(l);c[0]=k;var n={};for(var p in t)hasOwnProperty.call(t,p)&&(n[p]=t[p]);n.originalType=e,n.mdxType="string"==typeof e?e:o,c[1]=n;for(var i=2;i<l;i++)c[i]=a[i];return r.createElement.apply(null,c)}return r.createElement.apply(null,a)}k.displayName="MDXCreateElement"},8690:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>i});var r=a(7462),o=(a(7294),a(4137));const l={},c="Rocketchat Recipe",n={unversionedId:"contrib/rocketchat",id:"contrib/rocketchat",title:"Rocketchat Recipe",description:"Source",source:"@site/docs/contrib/rocketchat.md",sourceDirName:"contrib",slug:"/contrib/rocketchat",permalink:"/docs/7.x/contrib/rocketchat",draft:!1,editUrl:"https://github.com/deployphp/deployer/edit/master/docs/contrib/rocketchat.md",tags:[],version:"current",frontMatter:{},sidebar:"contrib",previous:{title:"Raygun Recipe",permalink:"/docs/7.x/contrib/raygun"},next:{title:"Rollbar Recipe",permalink:"/docs/7.x/contrib/rollbar"}},p={},i=[{value:"Installing",id:"installing",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Usage",id:"usage",level:2},{value:"Configuration",id:"configuration-1",level:2},{value:"rockchat_title",id:"rockchat_title",level:3},{value:"rocketchat_icon_emoji",id:"rocketchat_icon_emoji",level:3},{value:"rocketchat_icon_url",id:"rocketchat_icon_url",level:3},{value:"rocketchat_channel",id:"rocketchat_channel",level:3},{value:"rocketchat_room_id",id:"rocketchat_room_id",level:3},{value:"rocketchat_username",id:"rocketchat_username",level:3},{value:"rocketchat_webhook",id:"rocketchat_webhook",level:3},{value:"rocketchat_color",id:"rocketchat_color",level:3},{value:"rocketchat_success_color",id:"rocketchat_success_color",level:3},{value:"rocketchat_failure_color",id:"rocketchat_failure_color",level:3},{value:"rocketchat_text",id:"rocketchat_text",level:3},{value:"rocketchat_success_text",id:"rocketchat_success_text",level:3},{value:"rocketchat_failure_text",id:"rocketchat_failure_text",level:3},{value:"Tasks",id:"tasks",level:2},{value:"rocketchat:notify",id:"rocketchatnotify",level:3},{value:"rocketchat:notify:success",id:"rocketchatnotifysuccess",level:3},{value:"rocketchat:notify:failure",id:"rocketchatnotifyfailure",level:3}],u={toc:i};function h(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,r.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"rocketchat-recipe"},"Rocketchat Recipe"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"require 'contrib/rocketchat.php';\n")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/tree/master/contrib/rocketchat.php"},"Source")),(0,o.kt)("h2",{id:"installing"},"Installing"),(0,o.kt)("p",null,"Create a RocketChat incoming webhook, through the administration panel."),(0,o.kt)("p",null,"Add hook on deploy:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"before('deploy', 'rocketchat:notify');\n")),(0,o.kt)("h2",{id:"configuration"},"Configuration"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"rocketchat_webhook")," - incoming rocketchat webook ",(0,o.kt)("strong",{parentName:"p"},"required")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"set('rocketchat_webhook', 'https://rocketchat.yourcompany.com/hooks/XXXXX');\n"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"rocketchat_title")," - the title of the application, defaults to ",(0,o.kt)("inlineCode",{parentName:"p"},"{{application}}"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"rocketchat_text")," - notification message"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"set('rocketchat_text', '_{{user}}_ deploying {{branch}} to {{target}}');\n"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"rocketchat_success_text")," \u2013 success template, default:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"set('rocketchat_success_text', 'Deploy to *{{target}}* successful');\n"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"rocketchat_failure_text")," \u2013 failure template, default:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"set('rocketchat_failure_text', 'Deploy to *{{target}}* failed');\n"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"rocketchat_color")," \u2013 color's attachment")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"rocketchat_success_color")," \u2013 success color's attachment")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"rocketchat_failure_color")," \u2013 failure color's attachment"))),(0,o.kt)("h2",{id:"usage"},"Usage"),(0,o.kt)("p",null,"If you want to notify only about beginning of deployment add this line only:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"before('deploy', 'rocketchat:notify');\n")),(0,o.kt)("p",null,"If you want to notify about successful end of deployment add this too:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"after('deploy:success', 'rocketchat:notify:success');\n")),(0,o.kt)("p",null,"If you want to notify about failed deployment add this too:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"after('deploy:failed', 'rocketchat:notify:failure');\n")),(0,o.kt)("h2",{id:"configuration-1"},"Configuration"),(0,o.kt)("h3",{id:"rockchat_title"},"rockchat_title"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L64"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"return get('application', 'Project');\n")),(0,o.kt)("h3",{id:"rocketchat_icon_emoji"},"rocketchat_icon_emoji"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L68"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"':robot:'\n")),(0,o.kt)("h3",{id:"rocketchat_icon_url"},"rocketchat_icon_url"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L69"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"null\n")),(0,o.kt)("h3",{id:"rocketchat_channel"},"rocketchat_channel"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L71"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"null\n")),(0,o.kt)("h3",{id:"rocketchat_room_id"},"rocketchat_room_id"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L72"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"null\n")),(0,o.kt)("h3",{id:"rocketchat_username"},"rocketchat_username"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L73"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"null\n")),(0,o.kt)("h3",{id:"rocketchat_webhook"},"rocketchat_webhook"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L74"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"null\n")),(0,o.kt)("h3",{id:"rocketchat_color"},"rocketchat_color"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L76"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"'#000000'\n")),(0,o.kt)("h3",{id:"rocketchat_success_color"},"rocketchat_success_color"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L77"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"'#00c100'\n")),(0,o.kt)("h3",{id:"rocketchat_failure_color"},"rocketchat_failure_color"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L78"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"'#ff0909'\n")),(0,o.kt)("h3",{id:"rocketchat_text"},"rocketchat_text"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L80"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"'_{{user}}_ deploying `{{branch}}` to *{{target}}*'\n")),(0,o.kt)("h3",{id:"rocketchat_success_text"},"rocketchat_success_text"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L81"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"'Deploy to *{{target}}* successful'\n")),(0,o.kt)("h3",{id:"rocketchat_failure_text"},"rocketchat_failure_text"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L82"},"Source")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"'Deploy to *{{target}}* failed'\n")),(0,o.kt)("h2",{id:"tasks"},"Tasks"),(0,o.kt)("h3",{id:"rocketchatnotify"},"rocketchat:notify"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L85"},"Source")),(0,o.kt)("p",null,"Notifies RocketChat."),(0,o.kt)("h3",{id:"rocketchatnotifysuccess"},"rocketchat:notify:success"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L115"},"Source")),(0,o.kt)("p",null,"Notifies RocketChat about deploy finish."),(0,o.kt)("h3",{id:"rocketchatnotifyfailure"},"rocketchat:notify:failure"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/rocketchat.php#L145"},"Source")),(0,o.kt)("p",null,"Notifies RocketChat about deploy failure."))}h.isMDXComponent=!0}}]);