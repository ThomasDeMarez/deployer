"use strict";(self.webpackChunkdeployer_docs=self.webpackChunkdeployer_docs||[]).push([[1013],{4137:(e,a,t)=>{t.d(a,{Zo:()=>m,kt:()=>u});var p=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function n(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);a&&(p=p.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,p)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?n(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,p,r=function(e,a){if(null==e)return{};var t,p,r={},n=Object.keys(e);for(p=0;p<n.length;p++)t=n[p],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(p=0;p<n.length;p++)t=n[p],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=p.createContext({}),o=function(e){var a=p.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},m=function(e){var a=o(e.components);return p.createElement(s.Provider,{value:a},e.children)},d={inlineCode:"code",wrapper:function(e){var a=e.children;return p.createElement(p.Fragment,{},a)}},c=p.forwardRef((function(e,a){var t=e.components,r=e.mdxType,n=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=o(t),u=r,h=c["".concat(s,".").concat(u)]||c[u]||d[u]||n;return t?p.createElement(h,i(i({ref:a},m),{},{components:t})):p.createElement(h,i({ref:a},m))}));function u(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var n=t.length,i=new Array(n);i[0]=c;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var o=2;o<n;o++)i[o]=t[o];return p.createElement.apply(null,i)}return p.createElement.apply(null,t)}c.displayName="MDXCreateElement"},4663:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>n,metadata:()=>l,toc:()=>o});var p=t(7462),r=(t(7294),t(4137));const n={},i="Ispmanager Recipe",l={unversionedId:"contrib/ispmanager",id:"contrib/ispmanager",title:"Ispmanager Recipe",description:"Source",source:"@site/docs/contrib/ispmanager.md",sourceDirName:"contrib",slug:"/contrib/ispmanager",permalink:"/docs/7.x/contrib/ispmanager",draft:!1,editUrl:"https://github.com/deployphp/deployer/edit/master/docs/contrib/ispmanager.md",tags:[],version:"current",frontMatter:{},sidebar:"contrib",previous:{title:"Hipchat Recipe",permalink:"/docs/7.x/contrib/hipchat"},next:{title:"Mattermost Recipe",permalink:"/docs/7.x/contrib/mattermost"}},s={},o=[{value:"Configuration",id:"configuration",level:2},{value:"ispmanager_owner",id:"ispmanager_owner",level:3},{value:"ispmanager_doc_root",id:"ispmanager_doc_root",level:3},{value:"ispmanager",id:"ispmanager",level:3},{value:"vhost",id:"vhost",level:3},{value:"ispmanager_session",id:"ispmanager_session",level:3},{value:"ispmanager_databases",id:"ispmanager_databases",level:3},{value:"ispmanager_domains",id:"ispmanager_domains",level:3},{value:"ispmanager_phplist",id:"ispmanager_phplist",level:3},{value:"ispmanager_aliaslist",id:"ispmanager_aliaslist",level:3},{value:"Tasks",id:"tasks",level:2},{value:"ispmanager:init",id:"ispmanagerinit",level:3},{value:"ispmanager:db-server-list",id:"ispmanagerdb-server-list",level:3},{value:"ispmanager:db-list",id:"ispmanagerdb-list",level:3},{value:"ispmanager:domain-list",id:"ispmanagerdomain-list",level:3},{value:"ispmanager:db-create",id:"ispmanagerdb-create",level:3},{value:"ispmanager:db-delete",id:"ispmanagerdb-delete",level:3},{value:"ispmanager:domain-create",id:"ispmanagerdomain-create",level:3},{value:"ispmanager:get-php-list",id:"ispmanagerget-php-list",level:3},{value:"ispmanager:print-php-list",id:"ispmanagerprint-php-list",level:3},{value:"ispmanager:domain-php-select",id:"ispmanagerdomain-php-select",level:3},{value:"ispmanager:domain-alias-create",id:"ispmanagerdomain-alias-create",level:3},{value:"ispmanager:domain-alias-delete",id:"ispmanagerdomain-alias-delete",level:3},{value:"ispmanager:domain-delete",id:"ispmanagerdomain-delete",level:3},{value:"ispmanager:process",id:"ispmanagerprocess",level:3}],m={toc:o};function d(e){let{components:a,...t}=e;return(0,r.kt)("wrapper",(0,p.Z)({},m,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"ispmanager-recipe"},"Ispmanager Recipe"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"require 'contrib/ispmanager.php';\n")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/tree/master/contrib/ispmanager.php"},"Source")),(0,r.kt)("p",null,"This recipe for work with ISPManager Lite panel by API."),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("h3",{id:"ispmanager_owner"},"ispmanager_owner"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L10"},"Source")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"'www-root'\n")),(0,r.kt)("h3",{id:"ispmanager_doc_root"},"ispmanager_doc_root"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L11"},"Source")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"'/var/www/' . get('ispmanager_owner') . '/data/'\n")),(0,r.kt)("h3",{id:"ispmanager"},"ispmanager"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L14"},"Source")),(0,r.kt)("p",null,"ISPManager default configuration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"[\n    'api' => [\n        'dsn' => 'https://root:password@localhost:1500/ispmgr',\n        'secure' => true,\n    ],\n    'createDomain' => NULL,\n    'updateDomain' => NULL,\n    'deleteDomain' => NULL,\n    'createDatabase' => NULL,\n    'deleteDatabase' => NULL,\n    'phpSelect' => NULL,\n    'createAlias' => NULL,\n    'deleteAlias' => NULL,\n]\n")),(0,r.kt)("h3",{id:"vhost"},"vhost"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L30"},"Source")),(0,r.kt)("p",null,"Vhost default configuration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"[\n    'name' => '{{domain}}',\n    'php_enable' => 'on',\n    'aliases' => 'www.{{domain}}',\n    'home' => 'www/{{domain}}',\n    'owner' => get('ispmanager_owner'),\n    'email' => 'webmaster@{{domain}}',\n    'charset' => 'off',\n    'dirindex' => 'index.php uploaded.html',\n    'ssi' => 'on',\n    'php' => 'on',\n    'php_mode' => 'php_mode_mod',\n    'basedir' => 'on',\n    'php_apache_version' => 'native',\n    'cgi' => 'off',\n    'log_access' => 'on',\n    'log_error' => 'on',\n]\n")),(0,r.kt)("h3",{id:"ispmanager_session"},"ispmanager_session"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L50"},"Source")),(0,r.kt)("p",null,"Storage"),(0,r.kt)("h3",{id:"ispmanager_databases"},"ispmanager_databases"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L51"},"Source")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"[\n    'servers' => [],\n    'hosts' => [],\n    'dblist' => [],\n]\n")),(0,r.kt)("h3",{id:"ispmanager_domains"},"ispmanager_domains"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L57"},"Source")),(0,r.kt)("h3",{id:"ispmanager_phplist"},"ispmanager_phplist"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L58"},"Source")),(0,r.kt)("h3",{id:"ispmanager_aliaslist"},"ispmanager_aliaslist"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L59"},"Source")),(0,r.kt)("h2",{id:"tasks"},"Tasks"),(0,r.kt)("h3",{id:"ispmanagerinit"},"ispmanager:init"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L62"},"Source")),(0,r.kt)("p",null,"Installs ispmanager."),(0,r.kt)("h3",{id:"ispmanagerdb-server-list"},"ispmanager:db-server-list"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L85"},"Source")),(0,r.kt)("p",null,"Takes database servers list."),(0,r.kt)("h3",{id:"ispmanagerdb-list"},"ispmanager:db-list"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L122"},"Source")),(0,r.kt)("p",null,"Takes databases list."),(0,r.kt)("h3",{id:"ispmanagerdomain-list"},"ispmanager:domain-list"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L144"},"Source")),(0,r.kt)("p",null,"Takes domain list."),(0,r.kt)("h3",{id:"ispmanagerdb-create"},"ispmanager:db-create"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L160"},"Source")),(0,r.kt)("p",null,"Creates new database."),(0,r.kt)("h3",{id:"ispmanagerdb-delete"},"ispmanager:db-delete"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L230"},"Source")),(0,r.kt)("p",null,"Deletes database."),(0,r.kt)("h3",{id:"ispmanagerdomain-create"},"ispmanager:domain-create"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L281"},"Source")),(0,r.kt)("p",null,"Creates new domain."),(0,r.kt)("h3",{id:"ispmanagerget-php-list"},"ispmanager:get-php-list"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L327"},"Source")),(0,r.kt)("p",null,"Gets allowed PHP modes and versions."),(0,r.kt)("h3",{id:"ispmanagerprint-php-list"},"ispmanager:print-php-list"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L373"},"Source")),(0,r.kt)("p",null,"Prints allowed PHP modes and versions."),(0,r.kt)("h3",{id:"ispmanagerdomain-php-select"},"ispmanager:domain-php-select"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L411"},"Source")),(0,r.kt)("p",null,"Switches PHP version for domain."),(0,r.kt)("h3",{id:"ispmanagerdomain-alias-create"},"ispmanager:domain-alias-create"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L480"},"Source")),(0,r.kt)("p",null,"Creates new domain alias."),(0,r.kt)("h3",{id:"ispmanagerdomain-alias-delete"},"ispmanager:domain-alias-delete"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L549"},"Source")),(0,r.kt)("p",null,"Deletes domain alias."),(0,r.kt)("h3",{id:"ispmanagerdomain-delete"},"ispmanager:domain-delete"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L617"},"Source")),(0,r.kt)("p",null,"Deletes domain."),(0,r.kt)("h3",{id:"ispmanagerprocess"},"ispmanager:process"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/ispmanager.php#L664"},"Source")),(0,r.kt)("p",null,"Auto task processing."))}d.isMDXComponent=!0}}]);