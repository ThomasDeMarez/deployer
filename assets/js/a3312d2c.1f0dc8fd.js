"use strict";(self.webpackChunkdeployer_docs=self.webpackChunkdeployer_docs||[]).push([[4152],{4137:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>d});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=n.createContext({}),u=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},c=function(e){var t=u(e.components);return n.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,o=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),h=u(a),d=l,f=h["".concat(p,".").concat(d)]||h[d]||s[d]||o;return a?n.createElement(f,r(r({ref:t},c),{},{components:a})):n.createElement(f,r({ref:t},c))}));function d(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=a.length,r=new Array(o);r[0]=h;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:l,r[1]=i;for(var u=2;u<o;u++)r[u]=a[u];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},7438:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>s,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var n=a(7462),l=(a(7294),a(4137));const o={},r="Hangouts Recipe",i={unversionedId:"contrib/hangouts",id:"contrib/hangouts",title:"Hangouts Recipe",description:"Source",source:"@site/docs/contrib/hangouts.md",sourceDirName:"contrib",slug:"/contrib/hangouts",permalink:"/docs/7.x/contrib/hangouts",draft:!1,editUrl:"https://github.com/deployphp/deployer/edit/master/docs/contrib/hangouts.md",tags:[],version:"current",frontMatter:{},sidebar:"contrib",previous:{title:"Grafana Recipe",permalink:"/docs/7.x/contrib/grafana"},next:{title:"Hipchat Recipe",permalink:"/docs/7.x/contrib/hipchat"}},p={},u=[{value:"Configuration",id:"configuration",level:2},{value:"Usage",id:"usage",level:2},{value:"Configuration",id:"configuration-1",level:2},{value:"chat_title",id:"chat_title",level:3},{value:"chat_subtitle",id:"chat_subtitle",level:3},{value:"favicon",id:"favicon",level:3},{value:"chat_line1",id:"chat_line1",level:3},{value:"chat_line2",id:"chat_line2",level:3},{value:"Tasks",id:"tasks",level:2},{value:"chat:notify",id:"chatnotify",level:3},{value:"chat:notify:success",id:"chatnotifysuccess",level:3},{value:"chat:notify:failure",id:"chatnotifyfailure",level:3}],c={toc:u};function s(e){let{components:t,...a}=e;return(0,l.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"hangouts-recipe"},"Hangouts Recipe"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"require 'contrib/hangouts.php';\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/tree/master/contrib/hangouts.php"},"Source")),(0,l.kt)("p",null,"Add hook on deploy:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"before('deploy', 'chat:notify');\n")),(0,l.kt)("h2",{id:"configuration"},"Configuration"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"chat_webhook")," \u2013 chat incoming webhook url, ",(0,l.kt)("strong",{parentName:"li"},"required")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"chat_title")," \u2013 the title of your notification card, default ",(0,l.kt)("inlineCode",{parentName:"li"},"{{application}}")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"chat_subtitle")," \u2013 the subtitle of your card, default ",(0,l.kt)("inlineCode",{parentName:"li"},"{{hostname}}")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"chat_favicon")," \u2013 an image for the header of your card, default ",(0,l.kt)("inlineCode",{parentName:"li"},"http://{{hostname}}/favicon.png")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"chat_line1")," \u2013 first line of the text in your card, default: ",(0,l.kt)("inlineCode",{parentName:"li"},"{{branch}}")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"chat_line2")," \u2013 second line of the text in your card, default: ",(0,l.kt)("inlineCode",{parentName:"li"},"{{stage}}"))),(0,l.kt)("h2",{id:"usage"},"Usage"),(0,l.kt)("p",null,"If you want to notify only about beginning of deployment add this line only:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"before('deploy', 'chat:notify');\n")),(0,l.kt)("p",null,"If you want to notify about successful end of deployment add this too:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"after('deploy:success', 'chat:notify:success');\n")),(0,l.kt)("p",null,"If you want to notify about failed deployment add this too:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"after('deploy:failed', 'chat:notify:failure');\n")),(0,l.kt)("h2",{id:"configuration-1"},"Configuration"),(0,l.kt)("h3",{id:"chat_title"},"chat_title"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/hangouts.php#L45"},"Source")),(0,l.kt)("p",null,"Title of project"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"return get('application', 'Project');\n")),(0,l.kt)("h3",{id:"chat_subtitle"},"chat_subtitle"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/hangouts.php#L49"},"Source")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"get('hostname')\n")),(0,l.kt)("h3",{id:"favicon"},"favicon"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/hangouts.php#L52"},"Source")),(0,l.kt)("p",null,"If 'favicon' is set Google Hangouts Chat will decorate your card with an image."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"'http://{{hostname}}/favicon.png'\n")),(0,l.kt)("h3",{id:"chat_line1"},"chat_line1"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/hangouts.php#L55"},"Source")),(0,l.kt)("p",null,"Deploy messages"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"'{{branch}}'\n")),(0,l.kt)("h3",{id:"chat_line2"},"chat_line2"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/hangouts.php#L56"},"Source")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Default value"',title:'"Default','value"':!0},"'{{stage}}'\n")),(0,l.kt)("h2",{id:"tasks"},"Tasks"),(0,l.kt)("h3",{id:"chatnotify"},"chat:notify"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/hangouts.php#L59"},"Source")),(0,l.kt)("p",null,"Notifies Google Hangouts Chat."),(0,l.kt)("h3",{id:"chatnotifysuccess"},"chat:notify:success"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/hangouts.php#L101"},"Source")),(0,l.kt)("p",null,"Notifies Google Hangouts Chat about deploy finish."),(0,l.kt)("h3",{id:"chatnotifyfailure"},"chat:notify:failure"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/deployphp/deployer/blob/master/contrib/hangouts.php#L143"},"Source")),(0,l.kt)("p",null,"Notifies Google Hangouts Chat about deploy failure."))}s.isMDXComponent=!0}}]);